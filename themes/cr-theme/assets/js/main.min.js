!function(d){window.CRT={vp:{width:null,height:null,scrollTop:null},$body:null,$wrap:null,$menu:null,$footer:null,$footerLine:null,debounce:function(n,i,a){var s;return function(){var e=this,t=arguments,o=a&&!s;clearTimeout(s),s=setTimeout(function(){s=null,a||n.apply(e,t)},i),o&&n.apply(e,t)}},setViewPort:function(e){(e=e||!1)||(this.vp.width=d(window).width(),this.vp.height=d(window).height()),this.vp.scrollTop=d(window).scrollTop()},isMobile:function(){return this.vp.width<=767},isTab:function(){return this.vp.width<=1024&&768<=this.vp.width},isMobileTab:function(){return this.isMobile()||this.isTab()},resetMenuProps:function(){this.$menu.find(".cr-menu-level-1.cr-menu-level-inline").css({left:"auto",right:"auto"})},setMenuProp:function(){if(this.isMobileTab())this.resetMenuProps();else{var r=this;this.$menu.find(".cr-menu-level-1.cr-menu-level-inline").each(function(){var e,t,o=d(this),n=o.closest("li"),i=n.width(),a=n.offset().left,s=0,l=(o.offset().left,a+i/2);o.find(">li").each(function(){s+=d(this).outerWidth()}),t=l+s/2>r.vp.width?0:"auto",0===(e=l-s/2<0?0:0===t?"auto":l-s/2)&&0===t&&(s="auto"),o.css({width:s,left:e+"px",right:t+"px"})})}},bookingPanel:function(){var e=d("#booking-panel"),o=d("#residences-keyword-dummy",e),t=d("#residences-keyword",e),n=(d(".booking-panel-fields",e),d("#keyword",e));if(e.length&&"undefined"!=typeof BookingPanelData){d.widget("custom.bookingpanel",d.ui.autocomplete,{_create:function(){var o=this;this.currentResidene,this.panelCol=this.element.closest(".booking-panel-col"),this.panelFields=this.element.closest(".booking-panel-fields"),this.scrollerWrap=this.panelFields.find(".booking-panel-dd-scroller"),this.errorMessage=this.element.data("errormessage"),this._super(),this.widget().menu("option","items",".booking-panel-dd-item"),this.menu.element.addClass("booking-panel-dd-menu"),this._on(this.element,{bookingpanelopen:function(e,t){o.menu.element.addClass("booking-panel-dd-menu-active")},bookingpanelclose:function(e,t){o.menu.element.removeClass("booking-panel-dd-menu-active")}})},_renderMenu:function(e,t){var o=this;this.currentResidene=this.element.val();var n=d("<ul>").addClass("booking-panel-dd-wrap");void 0!==t.error&&t.error?(this.errorMessage&&d("<li>").addClass("bookig-panel-dd-error").html(this.errorMessage.replace("%search_term%","<strong>"+this._value()+"</strong>")).appendTo(n),n.appendTo(e)):(d.each(t,function(e,t){o._renderColumn(n,t)}),0<n.find(">li").length?(d("<li>").addClass("booking-panel-dd-wrapli").append(n).appendTo(e),d("<li>").addClass("booking-panel-dd-scroller").append("<span></span>").appendTo(e)):this.errorMessage&&d("<li>").addClass("bookig-panel-dd-error").html(this.errorMessage).appendTo(e))},_renderColumn:function(e,t){var n=this,i=d('<li class="booking-panel-dd-col"></li>');return d.each(t,function(e,t){var o=d("<ul>").addClass("booking-panel-dd-group");d.each(t.items,function(e,t){n._renderItem(o,t)}),0<o.find(">li").length&&(i.append('<span class="booking-panel-dd-group-name">'+t.groupName+"</span>"),i.append(o))}),i.appendTo(e)},_renderItem:function(e,t){var o=d("<li>");this.currentResidene===t.label&&o.addClass("cr-state-active"),t.disable&&o.addClass("ui-state-disabled"),o.html(t.label).addClass("booking-panel-dd-item").data("ui-autocomplete-item",t).appendTo(e)},_resizeMenu:function(){var t=this.menu.element.find(".booking-panel-dd-wrapli"),e=this.menu.element.find(".booking-panel-dd-wrap");this.menu.element.css({width:this.panelCol.outerWidth(),height:this.panelFields.outerHeight()-this.panelCol.outerHeight()-4}),t.outerHeight()<e.outerHeight()?(t.mCustomScrollbar({axis:"y"}),this.menu.element.addClass("booking-panel-dd-hasscroller"),d(".booking-panel-dd-scroller span").on("click",function(e){e.preventDefault(),t.mCustomScrollbar("scrollTo","-="+t.outerHeight())})):this.menu.element.removeClass("booking-panel-dd-hasscroller")},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?this._suggest(e):this._suggest({error:!0}),this._trigger("open")}}),t.bookingpanel({minLength:0,source:BookingPanelData.source,position:{my:"left top",at:"left top",of:d(".booking-panel-dd-position",e)},select:function(e,t){o.html(t.item.label),n.val(t.item.value)},source:function(a,e){var s=new RegExp(d.ui.autocomplete.escapeRegex(a.term),"i"),l=new RegExp("^"+d.ui.autocomplete.escapeRegex(a.term),"i"),o=[];d.each(BookingPanelData.column,function(e,t){var i=[];d.each(t,function(e,t){var o={},n=[];!a.term||l.test(e)?o={groupName:e,items:t}:(d.each(t,function(e,t){(s.test(t.label)||s.test(t.value))&&n.push(t)}),0<n.length&&(o.groupName=e,o.items=n)),void 0!==o.items&&0<o.items.length&&i.push(o)}),0<i.length&&o.push(i)}),e(o)}}),e.find("#booking-panel-dd-keywords").on("click",function(e){e.preventDefault(),t.bookingpanel("widget").is(":visible")?t.bookingpanel("close"):t.bookingpanel("search","")});var i=d("#booking-panel-departure-dummy").datepicker({dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],firstDay:1,altField:"#booking-panel-departure",altFormat:"dd MM yy",minDate:1,onSelect:function(e,t){i.removeClass("bp-date-picker-shown"),d("#bp-departure-date .booking-panel-day strong").html(d.datepicker.formatDate("dd",new Date(e))),d("#bp-departure-date .booking-panel-monthyear").html(d.datepicker.formatDate("MM yy",new Date(e)))}});i.datepicker("setDate",1),d("#bp-departure-date .booking-panel-day strong").html(d.datepicker.formatDate("dd",i.datepicker("getDate"))),d("#bp-departure-date .booking-panel-monthyear").html(d.datepicker.formatDate("MM yy",i.datepicker("getDate")));var a=d("#booking-panel-checkin-dummy").datepicker({dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],firstDay:1,altField:"#booking-panel-checkin",altFormat:"dd MM yy",minDate:0,onSelect:function(e,t){if(e){var o=new Date(e);o.setDate(o.getDate()+1),i.datepicker("option","minDate",o),a.removeClass("bp-date-picker-shown"),d("#bp-departure-date .booking-panel-day strong").html(d.datepicker.formatDate("dd",i.datepicker("getDate"))),d("#bp-departure-date .booking-panel-monthyear").html(d.datepicker.formatDate("MM yy",i.datepicker("getDate")))}d("#bp-arrival-date .booking-panel-day strong").html(d.datepicker.formatDate("dd",new Date(e))),d("#bp-arrival-date .booking-panel-monthyear").html(d.datepicker.formatDate("MM yy",new Date(e)))}});d("#bp-arrival-date .booking-panel-day strong").html(d.datepicker.formatDate("dd",a.datepicker("getDate"))),d("#bp-arrival-date .booking-panel-monthyear").html(d.datepicker.formatDate("MM yy",a.datepicker("getDate"))),d("#bp-arrival-date").on("click",function(e){a.toggleClass("bp-date-picker-shown")}),d("#bp-departure-date").on("click",function(e){i.toggleClass("bp-date-picker-shown")}),d(".booking-panel-sb-trigger").on("click",function(e){e.preventDefault(),d(this).closest(".booking-panel-col").find(".booking-panel-select-box").toggleClass("cr-show-selectbox")}),d(".booking-panel-select-box li").on("click",function(e){e.preventDefault();var t=d(this);t.data("value");t.siblings(".cr-sb-selected").not(t).removeClass("cr-sb-selected"),t.addClass("cr-sb-selected").closest(".booking-panel-col").find(".booking-panel-sb-trigger strong").html(t.text()).end().find("select").val(t.data("value")),t.closest(".booking-panel-select-box").removeClass("cr-show-selectbox")})}},scrollHeader:function(){if(!this.$body.hasClass("fixed-header"))return!1;0<this.vp.scrollTop?!this.$body.hasClass("header-scrolled")&&this.$body.addClass("header-scrolled"):this.$body.hasClass("header-scrolled")&&this.$body.removeClass("header-scrolled")},scrollFooter:function(){var e=this.$footerLine.offset().top+this.$footer.outerHeight()-100;this.vp.scrollTop+this.vp.height>e?!this.$body.hasClass("cr-animate-footer")&&this.$body.addClass("cr-animate-footer"):this.$body.hasClass("cr-animate-footer")&&this.$body.removeClass("cr-animate-footer")},scrollEvents:function(){this.setViewPort(!0),this.scrollHeader(),this.scrollFooter()},resizeFooter:function(){var e=this.$footer.outerHeight(!0);this.$body.css({"padding-bottom":e+"px"})},resizeEevents:function(){this.setViewPort(),this.setMenuProp(),this.resizeFooter()},events:function(){var t=this;d(window).scroll(d.proxy(this.scrollEvents,this)),d(window).on("resize",CRT.debounce(function(){CRT.resizeEevents()},250)),d(".cr-menu-level-1 > li").on("mouseenter",function(){d(this).addClass("on-hover").removeClass("not-hover").siblings("li").removeClass("on-hover").addClass("not-hover")}).on("mouseleave",function(){d(this).removeClass("on-hover").siblings("li").removeClass("not-hover")}),d(".booking-panel-trigger").on("click",function(e){e.preventDefault(),t.$body.addClass("booking-panel-shown")}),d(".booking-panel-close").on("click",function(e){e.preventDefault(),t.$body.removeClass("booking-panel-shown")}),d(window).on("load",d.proxy(function(){this.resizeFooter()},this))},init:function(){this.setViewPort(),this.$body=d("body"),this.$wrap=d("#cr-wrap"),this.$menu=d("#menu-header-primary"),this.$footer=d("#site-footer"),this.$footerLine=d("#footer-top-line"),this.setMenuProp(),this.resizeFooter(),this.bookingPanel(),this.scrollHeader(),this.events()}},d(document).ready(function(){CRT.init()})}(jQuery);