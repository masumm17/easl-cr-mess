!function(d){function s(e,t){this.$el=e,this.$trigger=null,this.collapsed=!1,this.collapsing=!1,this.className={COLLAPSE:"cr-collapse",SHOW:"cr-collapse-show",COLLAPSING:"cr-collapsing",COLLAPSED:"cr-collapsed"},this.EventsName={TRANSITION_END:"transitionEnd webkitTransitionEnd transitionend oTransitionEnd msTransitionEnd"},this.$el.removeClass(this.className.COLLAPSING).addClass(this.className.COLLAPSE),this.setTrigger(t)}function e(e){this.$el=e,this.accesstoken=this.getData("secretkey"),this.number=2*parseInt(this.getData("number")),this.ccenabled=this.getData("ccenabled"),this.ccpos=parseInt(this.getData("ccpos")),this.feeds=[],this.fetchError=!1,this.imageSize="standard_resolution",this.accesstoken&&0<this.number&&this.init()}s.prototype.show=function(){var t=this;this.collapsing||this.$el.hasClass(this.className.SHOW)||(this.$el.removeClass(this.className.COLLAPSE).addClass(this.className.COLLAPSING),this.$trigger&&this.$trigger.addClass("mobile-nav-arrow-flip"),this.$el[0].style.height=0,this.collapsing=!0,this.$el.one(this.EventsName.TRANSITION_END,function(e){t.$el.removeClass(t.className.COLLAPSING).addClass(t.className.COLLAPSED).addClass(t.className.SHOW),t.$el[0].style.height="",t.collapsing=!1}),this.$el[0].style.height=this.$el[0].scrollHeight+"px")},s.prototype.hide=function(){var t=this;!this.collapsing&&this.$el.hasClass(this.className.SHOW)&&(this.$el[0].style.height=this.$el[0].getBoundingClientRect().height+"px",this.$el[0].offsetHeight,this.$el.addClass(this.className.COLLAPSING).removeClass(this.className.COLLAPSE).removeClass(this.className.SHOW),this.$trigger&&this.$trigger.removeClass("mobile-nav-arrow-flip"),this.collapsing=!0,this.$el.one(this.EventsName.TRANSITION_END,function(e){t.$el.removeClass(t.className.COLLAPSING).addClass(t.className.COLLAPSE),t.collapsing=!1}),this.$el[0].style.height="")},s.prototype.toggle=function(){this.$el.hasClass(this.className.SHOW)?this.hide():this.show()},s.prototype.setTrigger=function(e){var t=this,s="click";window.Touch&&(s="touchstart"),e&&e.length&&(this.$trigger=e,this.$trigger.on(s,function(e){e.preventDefault(),t.toggle()}))},e.prototype.getData=function(e){var t=this.$el.data(e);return void 0!==t&&t},e.prototype.parseItem=function(e){var t=null!==e.caption?e.caption.text:"",s=e.images[this.imageSize].url;return{id:e.id,caption:t,url:s,likes:e.likes.count,comments:e.comments.count,plink:e.link,username:e.user.username}},e.prototype.displayFeed=function(e){var t=this.$el;t.find(".cr-instagram-feed-con").html(e),t.trigger("instagramfeedloaded"),t.waitForImages(function(){t.addClass("cr-instagram-feed-image-loaded")}).find(".cr-instagram-feed-item").waypoint(function(){d(this).addClass("cr_start_animation")},{offset:"96%"})},e.prototype.updateFeeds=function(){var t=this;jQuery.ajax({type:"POST",dataType:"json",url:CRTSettings.ajaxURL,data:{action:"cr_update_instagram_feed_cache",feeds:t.feeds},success:function(e){void 0===e&&"OK"!==e.status||t.displayFeed(e.html)},error:function(e){console.log("Feed update errror")}})},e.prototype.fetchMedia=function(){var s=this,e="https://api.instagram.com/v1/users/self/media/recent/?access_token="+this.accesstoken+"&count="+parseInt(this.number);d.ajax({type:"POST",dataType:"jsonp",url:e,success:function(e){if(e&&void 0!==e)if(200===e.meta.code){for(var t=0;t<e.data.length;t++)s.feeds.length<=s.number&&"image"===e.data[t].type&&s.feeds.push(s.parseItem(e.data[t]));0<s.feeds.length&&s.updateFeeds()}else s.fetchError=!0;else s.fetchError=!0},error:function(e){s.fetchError=!0}})},e.prototype.init=function(){this.fetchMedia()},window.CRT={vp:{width:null,height:null,scrollTop:null},$body:null,$wrap:null,$menu:null,$footer:null,$footerLine:null,debounce:function(i,o,a){var n;return function(){var e=this,t=arguments,s=a&&!n;clearTimeout(n),n=setTimeout(function(){n=null,a||i.apply(e,t)},o),s&&i.apply(e,t)}},setViewPort:function(e){(e=e||!1)||(this.vp.width=d(window).width(),this.vp.height=d(window).height()),this.vp.scrollTop=d(window).scrollTop()},isMobile:function(){return this.vp.width<=600},isTabPort:function(){return this.vp.width<=900&&600<this.vp.width},isTab:function(){return this.vp.width<=1200&&600<this.vp.width},isMobileTabPort:function(){return this.isMobile()||this.isTabPort()},isMobileTab:function(){return this.isMobile()||this.isTab()},resetMenuProps:function(){this.$menu.find(".cr-menu-level-1.cr-menu-level-inline").css({left:"auto",right:"auto"})},setMenuProp:function(){if(this.isMobileTab())this.resetMenuProps();else{var l=this;this.$menu.find(".cr-menu-level-1.cr-menu-level-inline").each(function(){var e,t,s=d(this),i=s.closest("li"),o=i.width(),a=i.offset().left,n=0,r=(s.offset().left,a+o/2);s.find(">li").each(function(){n+=d(this).outerWidth()}),t=r+n/2>l.vp.width?0:"auto",0===(e=r-n/2<0?0:0===t?"auto":r-n/2)&&0===t&&(n="auto"),s.css({width:n,left:e+"px",right:t+"px"})})}},mobileMenu:function(){d(".mobile-nav-arrow").each(function(){var e=d(this),t=e.siblings(".sub-menu");t.length&&new s(t,e)})},bookingPanel:function(){var e=d("#booking-panel"),s=d("#residences-keyword-dummy",e),t=d("#residences-keyword",e),i=(d(".booking-panel-fields",e),d("#keyword",e));if(e.length&&"undefined"!=typeof BookingPanelData){d.widget("custom.bookingpanel",d.ui.autocomplete,{_create:function(){var s=this;this.currentResidene,this.panelCol=this.element.closest(".booking-panel-col"),this.panelFields=this.element.closest(".booking-panel-fields"),this.scrollerWrap=this.panelFields.find(".booking-panel-dd-scroller"),this.errorMessage=this.element.data("errormessage"),this._super(),this.widget().menu("option","items",".booking-panel-dd-item"),this.menu.element.addClass("booking-panel-dd-menu"),this._on(this.element,{bookingpanelopen:function(e,t){s.menu.element.addClass("booking-panel-dd-menu-active")},bookingpanelclose:function(e,t){s.menu.element.removeClass("booking-panel-dd-menu-active")}})},_renderMenu:function(e,t){var s=this;this.currentResidene=this.element.val();var i=d("<ul>").addClass("booking-panel-dd-wrap");void 0!==t.error&&t.error?(this.errorMessage&&d("<li>").addClass("bookig-panel-dd-error").html(this.errorMessage.replace("%search_term%","<strong>"+this._value()+"</strong>")).appendTo(i),i.appendTo(e)):(d.each(t,function(e,t){s._renderColumn(i,t)}),0<i.find(">li").length?(d("<li>").addClass("booking-panel-dd-wrapli").append(i).appendTo(e),d("<li>").addClass("booking-panel-dd-scroller").append("<span></span>").appendTo(e)):this.errorMessage&&d("<li>").addClass("bookig-panel-dd-error").html(this.errorMessage).appendTo(e))},_renderColumn:function(e,t){var i=this,o=d('<li class="booking-panel-dd-col"></li>');return d.each(t,function(e,t){var s=d("<ul>").addClass("booking-panel-dd-group");d.each(t.items,function(e,t){i._renderItem(s,t)}),0<s.find(">li").length&&(o.append('<span class="booking-panel-dd-group-name">'+t.groupName+"</span>"),o.append(s))}),o.appendTo(e)},_renderItem:function(e,t){var s=d("<li>");this.currentResidene===t.label&&s.addClass("cr-state-active"),t.disable&&s.addClass("ui-state-disabled"),s.html(t.label).addClass("booking-panel-dd-item").data("ui-autocomplete-item",t).appendTo(e)},_resizeMenu:function(){var t=this.menu.element.find(".booking-panel-dd-wrapli"),e=this.menu.element.find(".booking-panel-dd-wrap");this.menu.element.css({width:this.panelCol.outerWidth(),height:this.panelFields.outerHeight()-this.panelCol.outerHeight()-3}),t.outerHeight()<e.outerHeight()?(t.mCustomScrollbar({axis:"y"}),this.menu.element.addClass("booking-panel-dd-hasscroller"),d(".booking-panel-dd-scroller span").on("click",function(e){e.preventDefault(),t.mCustomScrollbar("scrollTo","-="+t.outerHeight())})):this.menu.element.removeClass("booking-panel-dd-hasscroller")},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?this._suggest(e):this._suggest({error:!0}),this._trigger("open")},_appendTo:function(){var e=this.options.appendTo;return e&&(e=e.jquery||e.nodeType?d(e):this.document.find(e).eq(0)),e&&e[0]||(e=d(".booking-panel-dd-position")),e&&e[0]||(e=this.element.closest(".ui-front, dialog")),e.length||(e=this.document[0].body),e}});var o=d("#booking-panel-departure-dummy").datepicker({dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],firstDay:1,altField:"#booking-panel-departure",altFormat:"dd MM yy",minDate:1,onSelect:function(e,t){o.removeClass("bp-date-picker-shown"),d("#bp-departure-date .booking-panel-day strong").html(d.datepicker.formatDate("dd",new Date(e))),d("#bp-departure-date .booking-panel-monthyear").html(d.datepicker.formatDate("MM yy",new Date(e)))}});o.datepicker("setDate",1),d("#bp-departure-date .booking-panel-day strong").html(d.datepicker.formatDate("dd",o.datepicker("getDate"))),d("#bp-departure-date .booking-panel-monthyear").html(d.datepicker.formatDate("MM yy",o.datepicker("getDate")));var a=d("#booking-panel-checkin-dummy").datepicker({dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],firstDay:1,altField:"#booking-panel-checkin",altFormat:"dd MM yy",minDate:0,onSelect:function(e,t){if(e){var s=new Date(e);s.setDate(s.getDate()+1),o.datepicker("option","minDate",s),a.removeClass("bp-date-picker-shown"),d("#bp-departure-date .booking-panel-day strong").html(d.datepicker.formatDate("dd",o.datepicker("getDate"))),d("#bp-departure-date .booking-panel-monthyear").html(d.datepicker.formatDate("MM yy",o.datepicker("getDate")))}d("#bp-arrival-date .booking-panel-day strong").html(d.datepicker.formatDate("dd",new Date(e))),d("#bp-arrival-date .booking-panel-monthyear").html(d.datepicker.formatDate("MM yy",new Date(e)))}});d("#bp-arrival-date .booking-panel-day strong").html(d.datepicker.formatDate("dd",a.datepicker("getDate"))),d("#bp-arrival-date .booking-panel-monthyear").html(d.datepicker.formatDate("MM yy",a.datepicker("getDate"))),d("#bp-arrival-date").on("click",function(e){o.removeClass("bp-date-picker-shown"),d(".booking-panel-select-box").removeClass("cr-show-selectbox"),a.toggleClass("bp-date-picker-shown")}),d("#bp-departure-date").on("click",function(e){a.removeClass("bp-date-picker-shown"),d(".booking-panel-select-box").removeClass("cr-show-selectbox"),o.toggleClass("bp-date-picker-shown")}),d(".booking-panel-sb-trigger").on("click",function(e){e.preventDefault();var t=d(this).closest(".booking-panel-col").find(".booking-panel-select-box");a.removeClass("bp-date-picker-shown"),o.removeClass("bp-date-picker-shown"),d(".booking-panel-select-box").not(t).removeClass("cr-show-selectbox"),t.toggleClass("cr-show-selectbox")}),d(".booking-panel-select-box li").on("click",function(e){e.preventDefault();var t=d(this);t.data("value");t.siblings(".cr-sb-selected").not(t).removeClass("cr-sb-selected"),t.addClass("cr-sb-selected").closest(".booking-panel-col").find(".booking-panel-sb-trigger strong").html(t.text()).end().find("select").val(t.data("value")),t.closest(".booking-panel-select-box").removeClass("cr-show-selectbox")}),t.bookingpanel({minLength:0,source:BookingPanelData.source,position:{my:"left top",at:"left top",of:d(".booking-panel-dd-position",e)},open:function(e,t){a.removeClass("bp-date-picker-shown"),o.removeClass("bp-date-picker-shown"),d(".booking-panel-select-box").removeClass("cr-show-selectbox")},select:function(e,t){s.html(t.item.label),i.val(t.item.value)},source:function(a,e){var n=new RegExp(d.ui.autocomplete.escapeRegex(a.term),"i"),r=new RegExp("^"+d.ui.autocomplete.escapeRegex(a.term),"i"),s=[];d.each(BookingPanelData.column,function(e,t){var o=[];d.each(t,function(e,t){var s={},i=[];!a.term||r.test(e)?s={groupName:e,items:t}:(d.each(t,function(e,t){(n.test(t.label)||n.test(t.value))&&i.push(t)}),0<i.length&&(s.groupName=e,s.items=i)),void 0!==s.items&&0<s.items.length&&o.push(s)}),0<o.length&&s.push(o)}),e(s)}}),e.find("#booking-panel-dd-keywords").on("click",function(e){e.preventDefault(),t.bookingpanel("widget").is(":visible")?t.bookingpanel("close"):t.bookingpanel("search","")})}},scrollHeader:function(){if(!this.$body.hasClass("fixed-header"))return!1;0<this.vp.scrollTop?!this.$body.hasClass("header-scrolled")&&this.$body.addClass("header-scrolled"):this.$body.hasClass("header-scrolled")&&this.$body.removeClass("header-scrolled")},scrollFooter:function(){var e=this.$footerLine.offset().top+this.$footer.outerHeight()-100;this.vp.scrollTop+this.vp.height>e?!this.$body.hasClass("cr-animate-footer")&&this.$body.addClass("cr-animate-footer"):this.$body.hasClass("cr-animate-footer")&&this.$body.removeClass("cr-animate-footer")},scrollEvents:function(){this.setViewPort(!0),this.scrollHeader(),this.scrollFooter()},resizeFooter:function(){this.isTabPort()&&this.$body.css({"padding-bottom":"0px"});var e=this.$footer.outerHeight(!0);this.$body.css({"padding-bottom":e+"px"})},resizeEevents:function(){this.setViewPort(),this.setMenuProp(),this.resizeFooter()},hidePreloader:function(){d(".loading-animation").length&&d(".loading-animation").fadeOut(250,function(){d(".loading-animation").remove()})},events:function(){var t=this,e="click";window.Touch&&(e="touchstart"),d(window).scroll(d.proxy(this.scrollEvents,this)),d(window).on("resize",CRT.debounce(function(){CRT.resizeEevents()},250)),d(".mobile-menu-humburger").on(e,function(){t.$body.toggleClass("cr-mobile-menu-active")}),d(".cr-menu-level-1 > li").on("mouseenter",function(){d(this).addClass("on-hover").removeClass("not-hover").siblings("li").removeClass("on-hover").addClass("not-hover")}).on("mouseleave",function(){var e=d(this);e.hasClass("menu-item-has-children")?e.closest(".menu-item-depth-0").addClass("tertiary-menu-strecthed"):e.closest(".menu-item-depth-0").removeClass("tertiary-menu-strecthed"),d(this).removeClass("on-hover").siblings("li").removeClass("not-hover")}),d(".menu-item-depth-0").on("mouseleave",function(){d(this).removeClass("tertiary-menu-strecthed")}),d(".booking-panel-trigger").on("click",function(e){e.preventDefault(),t.$body.addClass("booking-panel-shown")}),d(".booking-panel-close").on("click",function(e){e.preventDefault(),t.$body.removeClass("booking-panel-shown")}),d(".cr-scroll-up").on("click",function(e){e.preventDefault(),d("html, body").animate({scrollTop:0},750,"linear")})},timeLine:function(){d(".sticky-side-nav").length&&setTimeout(function(){d(".sticky-side-nav").addClass("sticky-side-nav-collasped")},5e3)},instagramMobSlider:function(e){void 0!==d.fn.slick&&(this.isMobileTabPort()?!e.hasClass("cr-instagram-slider-activated")&&e.addClass("cr-instagram-slider-activated").slick({speed:700,infinite:!0,slidesToScroll:1}):e.hasClass("cr-instagram-slider-activated")&&e.removeClass("cr-instagram-slider-activated").slick("unslick"))},instagramFeed:function(){var t=this;d(".cr-instagram-feed-wrap").on("instagramfeedloaded",function(){var e=d(this).find(".cr-instagram-feed-con");t.instagramMobSlider(e),d(window).on("resize",CRT.debounce(function(){t.instagramMobSlider(e)},250))}).each(function(){d(this).hasClass("cr-fetch-feed")?new e(d(this)):(d(this).trigger("instagramfeedloaded"),d(this).waitForImages(function(){d(this).addClass("cr-instagram-feed-image-loaded")}).find(".cr-instagram-feed-item").waypoint(function(){d(this).addClass("cr_start_animation")},{offset:"96%"}))})},init:function(){this.setViewPort(),this.$body=d("body"),this.$wrap=d("#cr-wrap"),this.$menu=d("#menu-header-primary"),this.$footer=d("#site-footer"),this.$footerLine=d("#footer-top-line"),this.mobileMenu(),this.setMenuProp(),this.resizeFooter(),this.bookingPanel(),this.scrollHeader(),this.events(),this.timeLine(),this.instagramFeed()}},d(document).ready(function(){d("body").waitForImages(function(){CRT.init(),CRT.$body.addClass("page-loaded"),CRT.hidePreloader()})})}(jQuery);